<!DOCTYPE html>
<html lang="zh">
<head>
	<meta http-equiv="Content-Type" content="text/html">
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	<title>jQuery移动端全屏滚动插件开发</title>
	<style type="text/css">
		* {
			margin: 0;
			padding: 0;
		}
		html {
			font-size: 14px;
		}

		html,body {
			width: 100%;
			height: 100%;
			overflow: hidden;
		}
		#fullpage {
			width: 100%;
			height: 100%;
			position: absolute;
			top: 0;
			left: 0;
		}
		#fullpage .section {
			width: 100%;
			height: 100%;
			position: relative;
		}

		#fullpage .section {
			color: #fff;
			text-align: center;
		}
		#fullpage .section:nth-of-type(1) {
			background: hotpink;
		}
		#fullpage .section:nth-of-type(2) {
			background: orange;
		}
		#fullpage .section:nth-of-type(3) {
			background: purple;
		}
		.next-page {
			width: 100%;
			position: absolute;
			bottom: 2rem;
		}
	</style>
</head>
<body>
	<div id="fullpage">
		<div class="section" data-index="1">
			<h2>第一屏</h2>
			<div class="next-page">
				<p>︿</p>
				<p>︿</p>
				<p>︿</p>
			</div>
		</div>
		<div class="section" data-index="2">
			<h2>第二屏</h2>
			<div class="next-page">
				<p>︿</p>
				<p>︿</p>
				<p>︿</p>
			</div>
		</div>
		<div class="section" data-index="3">
			<h2>第三屏</h2>
			<div class="next-page">
				<p>︿</p>
				<p>︿</p>
				<p>︿</p>
			</div>
		</div>
	</div>

	<script type="text/javascript" src="../lib/jquery-3.3.1.min.js"></script>
	<!-- <script type="text/javascript" src="../myPlugins/jquery.fullPage.Scroll.js"></script> -->
	<script type="text/javascript">
		$(function(){
			var clientHeight = $(window).height();
			var $fullpage = $('#fullpage');
			var $nextPage = $fullpage.find('.next-page');
			var startY = 0, endY = 0;
			var index = 1, top = 0;

			$fullpage.on('touchstart','.next-page',function(e){
				e.preventDefault(); // 阻止默认行为
				var touches = e.touches;
				index = $(this).parent().get(0).dataset.index;

				console.log(index);
				if(touches.length == 1){
					var touch = touches[0];
					startY = touch.pageY;
				}
				console.log(index,startY);
			})
			$fullpage.on('touchend','.next-page',function(e){
				e.preventDefault(); // 阻止默认行为
				var touches = e.changedTouches;

				if(touches.length == 1){
					var touch = touches[0];
					endY = touch.pageY;
				}
				console.log(endY);
				console.log(endY - startY);
				var moveY = endY - startY;
				// 向下翻页
				if( moveY < 0 && Math.abs(moveY) > 20){
					if(index < $nextPage.length){
						$fullpage.animate({
							top: -index * clientHeight
						},200,function(){

						})
					}
				}
				// 向上翻页
				if(moveY > 0 && moveY > 20){
					if(index != 1){
						$fullpage.animate({
							top: -(index-2) * clientHeight
						},200,function(){

						})
					}
				}
			})
		})
	</script>
</body>
</html>